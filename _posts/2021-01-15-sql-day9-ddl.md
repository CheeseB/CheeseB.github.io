---
title: "[SQL] Day9 - DDL(2)"
categories:
- sql
tags:
- sql
- oracle
- database
classes: wide
---


### 테이블 삭제 (DROP, TRUNCATE)

- DROP: 테이블 삭제
	- 테이블에 저장된 모든 데이터, 인덱스 및 제약조건이 전부 삭제됨 (FK 제외)

```sql
DROP TABLE 테이블명;
```

- FLASHBACK: 삭제된 테이블 복구

```sql
DROP TABLE dept_new CASCADE CONSTRAINTS;

SHOW RECYCLEBIN; -- DB휴지통 보기
FLASHBACK TABLE dept_new TO BEFORE DROP;
```

- TRUNCATE: 테이블 잘라내기
	- 테이블의 모든 행들을 삭제함
	- 테이블이 사용하던 저장공간을 해제 (DELETE는 저장공간을 해제하진 않음)
	- ROLLBACK 정보를 발생시키지 않아 DELETE보다 수행속도가 빠르지만 ROLLBACK이 불가함

```sql
TRUNCATE TABLE 테이블명;
```


### 테이블 변경 (ALTER)

- RENAME: 테이블 이름 변경

```sql
RENAME 테이블명 TO 새 테이블명;
```

- ALTER: 테이블 변경
	- 컬럼: 새 컬럼 추가, 기존 컬럼 수정/삭제/이름변경
	- 제약조건: 추가/삭제, 활성화/비활성화
	- 테이블 읽기모드(READ ONLY)

- 컬럼 추가

```sql
ALTER TABLE 테이블명
ADD (컬럼명 데이터타입,
	 컬럼명 데이터타입,
	 ...);
```

```sql
ALTER TABLE emp04
ADD (email		VARCHAR2(10),
	 address	VARCHAR2(20));
```

- 컬럼 변경
	- 숫자, 문자 컬럼의 전체 길이 증가/축소
		- 축소는 모든 행의 컬럼값이 NULL이거나 행이 없는경우 가능
	- 데이터 타입 변경
		- 모든 행의 컬럼값이 NULL일 때만 가능
	- 디폴트 값을 변경하면 변경 이후에 입력된 행에만 적용됨

```sql
ALTER TABLE 테이블명
MODIFY (컬럼명 데이터타입,
		컬럼명 데이터타입,
		...);
```

```sql
ALTER TABLE scott_t
MODIFY (num		NUMBER(6),
        name	VARCHAR2(20));
```

- 컬렴 이름 변경

```sql
ALTER TABLE 테이블명
RENAME COLUMN 컬럼명 TO 새 컬럼명;
```

```sql
ALTER TABLE scott_t
RENAME COLUMN address TO addr;
```

- 컬렴 삭제

```sql
ALTER TABLE 테이블명
DROP (컬럼명);
```

```sql
ALTER TABLE emp04
DROP (email);
```

- 제약조건 추가

```sql
ALTER TABLE 테이블명
ADD CONSTRAINT 제약조건명 제약종류(컬럼)
```

```sql
CREATE TABLE scott_t3
(num    NUMBER(4),
 name   VARCHAR2(10));

-- PK 추가 --
ALTER TABLE scott_t3
ADD CONSTRAINT scott_t3_num_pk PRIMARY KEY(num);

-- NN 추가 --
ALTER TABLE scott_t3
MODIFY (name VARCHAR2(10) NOT NULL);
```
